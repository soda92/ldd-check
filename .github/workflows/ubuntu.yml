name: CI - Ubuntu
on: [pull_request, push]

jobs:
   all:
    name: ğŸš§Build
    runs-on: ubuntu-latest
    env:
      program_name: hello

    steps:
      - name: "ğŸ§° Checkout"
        uses: actions/checkout@v2
        with:
          fetch-depth: 0
          submodules: true

      - name: "ğŸ“¥ Install dependencies"
        run: |
          sudo apt update
          sudo apt install \
            build-essential git cmake ninja-build

      - name: "ğŸš§ Build package"
        run: |
          cmake \
            -B build \
            -G "Ninja"
          cmake --build build
          mkdir build/dist
          cp build/${{env.program_name}} build/dist

      - name: "ğŸ“¤ upload package"
        uses: actions/upload-artifact@v2
        with:
          name: build-artifacts
          path: build/dist
